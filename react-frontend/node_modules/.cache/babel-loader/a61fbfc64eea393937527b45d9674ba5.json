{"ast":null,"code":"var _jsxFileName = \"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/src/components/flight/ItineraryComponent.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport ReservationService from \"../../services/ReservationService\";\nimport SelectorComponent from \"../helpers/SelectorComponent\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ItineraryComponent(props) {\n  _s();\n\n  const [flights] = useState(props.itinerary);\n  const [prices, setPrices] = useState({});\n  let seatClass = [\"First\", \"Business\", \"Economy\"];\n  let history = useHistory(); //function to book flights on the click of the submit button. it gathers all info, cutomer, flights and seat class and creates reservation. then clears local storage and sends user to their profile\n\n  function flightBooker() {\n    let user = JSON.parse(sessionStorage.getItem(\"user\"));\n    flights.forEach(flight => {\n      ReservationService.createReservations(flight.id, user.id, localStorage.getItem(flight.id)).then(() => {});\n    });\n    localStorage.clear();\n    history.push(`/view-customer/${JSON.parse(sessionStorage.getItem(\"user\")).id}`);\n  } //handles changes to the seat slection. need to fix how it updaters state. price div wont update\n\n\n  function handleSelectChange(selectedValue, e) {\n    // setPrices({})\n    let temp = {};\n\n    if (selectedValue === \"Business\") {\n      temp[e] = flights.filter(flight => {\n        return flight.id === e;\n      })[0].aircraft.businessPrice;\n    } else if (selectedValue === \"First\") {\n      temp[e] = flights.filter(flight => {\n        return flight.id === e;\n      })[0].aircraft.firstPrice;\n    } else if (selectedValue === \"Economy\") {\n      temp[e] = flights.filter(flight => {\n        return flight.id === e;\n      })[0].aircraft.businessPrice;\n    }\n\n    setPrices({ ...prices\n    }, temp);\n    console.log(\"inside\", prices);\n  }\n\n  console.log(prices);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center mt-3 \",\n      children: \"Selected Itinerary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row flight-list\",\n      children: \" \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table table-striped flight-list mb-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Airline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Departure Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Arrival Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Ticket Price:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        className: \"flight-list\",\n        children:\n        /** working on filtering the seats so that when flights/reservations/class > flight/aircraft/class you cannot book that class anymore*/\n        flights.map(flight => {\n          let seatClassFlight = seatClass.filter(seatClass => {\n            // console.log(seatClass);\n            // console.log(flight);\n            if (seatClass === \"First\") {\n              // console.log\n              // console.log(flight.tickets <= flight.aircraft.firstClass);\n              return true;\n            } else {\n              return true;\n            }\n          }); //creates a table displaying chosen flights infor mation and lets you choose your class/displays price\n\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: flight.airline\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"small\", {\n                children: new Date(flight.departureDate).toLocaleString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"small\", {\n                children: new Date(flight.arrivalDate).toLocaleString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(SelectorComponent, {\n                  className: \"\",\n                  id: flight.id,\n                  arrayOfData: seatClassFlight,\n                  location: flight.id,\n                  onSelectChange: handleSelectChange\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 19\n            }, this), prices[flight.id] ? /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col\",\n              children: prices[flight.id]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"col\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 21\n            }, this)]\n          }, flight.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-dark col-2 offset-md-9 mb-2\",\n        onClick: flightBooker,\n        children: \"Book\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ItineraryComponent, \"GA08Er2f5hu4opaTt7gg+HHDOvU=\", false, function () {\n  return [useHistory];\n});\n\n_c = ItineraryComponent;\nexport default ItineraryComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItineraryComponent\");","map":{"version":3,"sources":["/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/src/components/flight/ItineraryComponent.js"],"names":["React","useHistory","useState","ReservationService","SelectorComponent","ItineraryComponent","props","flights","itinerary","prices","setPrices","seatClass","history","flightBooker","user","JSON","parse","sessionStorage","getItem","forEach","flight","createReservations","id","localStorage","then","clear","push","handleSelectChange","selectedValue","e","temp","filter","aircraft","businessPrice","firstPrice","console","log","map","seatClassFlight","airline","Date","departureDate","toLocaleString","arrivalDate"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport ReservationService from \"../../services/ReservationService\";\n\nimport SelectorComponent from \"../helpers/SelectorComponent\";\n\nfunction ItineraryComponent(props) {\n  const [flights] = useState(props.itinerary);\n  const [prices, setPrices] = useState({});\n  let seatClass = [\"First\", \"Business\", \"Economy\"];\n  let history = useHistory();\n  //function to book flights on the click of the submit button. it gathers all info, cutomer, flights and seat class and creates reservation. then clears local storage and sends user to their profile\n  function flightBooker() {\n    let user = JSON.parse(sessionStorage.getItem(\"user\"));\n\n    flights.forEach((flight) => {\n      ReservationService.createReservations(\n        flight.id,\n        user.id,\n        localStorage.getItem(flight.id)\n      ).then(() => {});\n    });\n    localStorage.clear();\n\n    history.push(\n      `/view-customer/${JSON.parse(sessionStorage.getItem(\"user\")).id}`\n    );\n  }\n\n  //handles changes to the seat slection. need to fix how it updaters state. price div wont update\n  function handleSelectChange(selectedValue, e) {\n    // setPrices({})\n    let temp = {};\n    if (selectedValue === \"Business\") {\n      temp[e] = flights.filter((flight) => {\n        return flight.id === e;\n      })[0].aircraft.businessPrice;\n    } else if (selectedValue === \"First\") {\n      temp[e] = flights.filter((flight) => {\n        return flight.id === e;\n      })[0].aircraft.firstPrice;\n    } else if (selectedValue === \"Economy\") {\n      temp[e] = flights.filter((flight) => {\n        return flight.id === e;\n      })[0].aircraft.businessPrice;\n    }\n    setPrices({ ...prices }, temp);\n    console.log(\"inside\", prices);\n  }\n  console.log(prices);\n  return (\n    <div>\n      <h2 className=\"text-center mt-3 \">Selected Itinerary</h2>\n      <div className=\"row flight-list\"> </div>\n      <table className=\"table table-striped flight-list mb-5\">\n        <thead>\n          <tr>\n            <th>Airline</th>\n            <th>Departure Time</th>\n            <th>Arrival Time</th>\n            <th>Details</th>\n            <th>Ticket Price:</th>\n          </tr>\n        </thead>\n        <tbody className=\"flight-list\">\n          {\n            /** working on filtering the seats so that when flights/reservations/class > flight/aircraft/class you cannot book that class anymore*/\n            flights.map((flight) => {\n              let seatClassFlight = seatClass.filter((seatClass) => {\n                // console.log(seatClass);\n                // console.log(flight);\n                if (seatClass === \"First\") {\n                  // console.log\n                  // console.log(flight.tickets <= flight.aircraft.firstClass);\n                  return true;\n                } else {\n                  return true;\n                }\n              });\n              //creates a table displaying chosen flights infor mation and lets you choose your class/displays price\n              return (\n                <tr key={flight.id}>\n                  <td>{flight.airline}</td>\n                  <td>\n                    <small>\n                      {new Date(flight.departureDate).toLocaleString()}\n                    </small>\n                  </td>\n                  <td>\n                    <small>\n                      {new Date(flight.arrivalDate).toLocaleString()}\n                    </small>\n                  </td>\n                  <td>\n                    <div className=\"row\">\n                      <SelectorComponent\n                        className=\"\"\n                        id={flight.id}\n                        arrayOfData={seatClassFlight}\n                        location={flight.id}\n                        onSelectChange={handleSelectChange}\n                      />\n                    </div>\n                  </td>\n\n                  {prices[flight.id] ? (\n                    <td className=\"col\">{prices[flight.id]}</td>\n                  ) : (\n                    <td className=\"col\"></td>\n                  )}\n                </tr>\n              );\n            })\n          }\n        </tbody>\n      </table>\n\n      <div className=\"row\">\n        {/** wnat to add pop up confirmation before allowing booking */}\n        <button\n          className=\"btn btn-dark col-2 offset-md-9 mb-2\"\n          onClick={flightBooker}\n        >\n          Book\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default ItineraryComponent;\n"]},"metadata":{},"sourceType":"module"}