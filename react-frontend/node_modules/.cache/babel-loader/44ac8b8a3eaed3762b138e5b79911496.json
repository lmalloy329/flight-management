{"ast":null,"code":"import _toConsumableArray from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import FlightService from\"../../services/FlightService\";import{Link}from\"react-router-dom\";import AirportService from\"../../services/AirportService\";import ItineraryComponent from\"./ItineraryComponent\";import ReservationService from\"../../services/ReservationService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListFlightComponent=/*#__PURE__*/function(_Component){_inherits(ListFlightComponent,_Component);var _super=_createSuper(ListFlightComponent);function ListFlightComponent(props){var _this;_classCallCheck(this,ListFlightComponent);_this=_super.call(this,props);_this.state={flights:[],origin:\"\",destination:\"\",departureDate:\"\",tripType:\"Roundtrip\",itinerary:[],reservations:[]};_this.handleSelectButton=_this.handleSelectButton.bind(_assertThisInitialized(_this));_this.flightLog=_this.flightLog.bind(_assertThisInitialized(_this));return _this;}//needed to mount info multiple times so i created function flightLog so component did mount calss that originally to check if data mounts\n_createClass(ListFlightComponent,[{key:\"componentDidMount\",value:function componentDidMount(){this.flightLog();}//used to updated state after slections re made\n},{key:\"flightLog\",value:function flightLog(){var _this2=this;//sets type of trip and departure date\nthis.setState({tripType:localStorage.getItem(\"selection\")||\"Roundtrip\",departureDate:localStorage.getItem(\"departureDate\")});//gets airport with origin code\nAirportService.getAirportsByCode(localStorage.getItem(\"origin\")).then(function(res){_this2.setState({origin:res.data});});//gets airprot with destination code\nAirportService.getAirportsByCode(localStorage.getItem(\"destination\")).then(function(res){_this2.setState({destination:res.data});});//gets fllights that are leaving from the orging airport, filters them to make sure they ahve correct destination, then checks the departure dates of the flights\nFlightService.getFlightsByAirportCode(localStorage.getItem(\"origin\")).then(function(res){var flights=res.data.filter(function(data){return data.destinationAirport[0].airportCode===localStorage.getItem(\"destination\");});var dDate=new Date(localStorage.getItem(\"departureDate\").slice(0,28));var pDate=new Date(dDate);pDate.setDate(pDate.getDate()-1);var lDate=new Date(dDate);pDate.setDate(lDate.getDate()+1);var flightsFiltered=flights.filter(function(flight){if(flight.departureDate.includes(dDate.toISOString().slice(0,10))||flight.departureDate.includes(lDate.toISOString().slice(0,10))||flight.departureDate.includes(pDate.toISOString().slice(0,10))){return true;}else{return false;}});_this2.setState({flights:flightsFiltered});//then gets the resercations that exist for the flights\nflightsFiltered.forEach(function(flight){return ReservationService.getReservationForFlight(flight.id).then(function(res){_this2.setState({reservations:[].concat(_toConsumableArray(_this2.state.reservations),[res])});});});});}//deletes flight by id (only available for employees))\n},{key:\"deleteFlight\",value:function deleteFlight(id){var _this3=this;FlightService.deleteFlight(id).then(function(res){_this3.setState({flights:_this3.state.flights.filter(function(flight){return flight.id!==id;})});});}},{key:\"handleSelectButton\",value:function handleSelectButton(e){var itin=this.state.itinerary;//Adds selected flight to passengers itinerary\nitin.push(this.state.flights.filter(function(flight){return flight.id===parseInt(e.target.value);})[0]);this.setState({itinerary:itin});console.log(this.state);if(this.state.tripType===\"Roundtrip\"&&this.state.itinerary.length<=1){//switch origin and destintion and change departure date\nlocalStorage.setItem(\"departureDate\",localStorage.getItem(\"returnDate\"));localStorage.removeItem(\"returnDate\");console.log(localStorage);var temp=localStorage.getItem(\"origin\");localStorage.setItem(\"origin\",localStorage.getItem(\"destination\"));console.log(localStorage);localStorage.setItem(\"destination\",temp);}if(this.state.tripType===\"Multicity\"&&this.state.itinerary.length<=1){//switch origin and destintion and change departure date\nlocalStorage.setItem(\"originalOrigin\",localStorage.getItem(\"origin\"));localStorage.setItem(\"originalDestination\",localStorage.getItem(\"destination\"));localStorage.setItem(\"departureDate\",localStorage.getItem(\"returnDate\"));localStorage.removeItem(\"returnDate\");localStorage.setItem(\"origin\",localStorage.getItem(\"originTwo\"));console.log(localStorage);localStorage.setItem(\"destination\",localStorage.getItem(\"destinationTwo\"));}//calss clight log to update state\nthis.flightLog();}},{key:\"render\",value:function render(){var _this4=this;var flights=this.state.flights;//if there\nif(localStorage.length===0){this.props.history.push(\"/search\");}return/*#__PURE__*/_jsxs(\"div\",{children:[/**checks to see at what point all the flights neccessary are added to itinerary component so that it can change to displaying that. */this.state.itinerary.length===0||this.state.tripType!==\"Oneway\"&&this.state.itinerary.length<2?/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mt-3\",children:\"Flight List\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row flight-list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[\"From \",this.state.origin.airportLocation,\" to\",\" \",this.state.destination.airportLocation]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table  table-striped flight-list mb-5\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Airline\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Departure Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Arrival Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"flight-list\",children:flights.map(function(flight){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:flight.airline}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{children:new Date(flight.departureDate).toLocaleString()})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{children:new Date(flight.arrivalDate).toLocaleString()})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-light col m-3\",value:flight.id,onClick:_this4.handleSelectButton,children:\"Select\"}),/*#__PURE__*/_jsx(Link,{className:\"btn btn-light col m-3\",to:\"/view-flight/\".concat(flight.id),children:\"View\"})]})]},flight.id);})})]})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card m-5 bg-subtle shadow-lg\",children:[\" \",this.state.tripType===\"Multicity\"?/*#__PURE__*/_jsxs(\"div\",{children:[console.log(localStorage),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-center\",children:[localStorage.getItem(\"originalOrigin\"),\" to\",\" \",localStorage.getItem(\"originalDestination\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"test-center\",children:\"Then\"})]}):null,/*#__PURE__*/_jsxs(\"h4\",{className:\"text-center\",children:[localStorage.getItem(\"origin\"),\" to\",\" \",localStorage.getItem(\"destination\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:this.state.tripType}),/*#__PURE__*/_jsx(ItineraryComponent,{itinerary:this.state.itinerary,reservations:this.state.reservations})]})}),\" \"]});}}]);return ListFlightComponent;}(Component);export default ListFlightComponent;","map":{"version":3,"sources":["/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/src/components/flight/ListFlightComponent.js"],"names":["React","Component","FlightService","Link","AirportService","ItineraryComponent","ReservationService","ListFlightComponent","props","state","flights","origin","destination","departureDate","tripType","itinerary","reservations","handleSelectButton","bind","flightLog","setState","localStorage","getItem","getAirportsByCode","then","res","data","getFlightsByAirportCode","filter","destinationAirport","airportCode","dDate","Date","slice","pDate","setDate","getDate","lDate","flightsFiltered","flight","includes","toISOString","forEach","getReservationForFlight","id","deleteFlight","e","itin","push","parseInt","target","value","console","log","length","setItem","removeItem","temp","history","airportLocation","map","airline","toLocaleString","arrivalDate"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport FlightService from \"../../services/FlightService\";\nimport { Link } from \"react-router-dom\";\nimport AirportService from \"../../services/AirportService\";\nimport ItineraryComponent from \"./ItineraryComponent\";\nimport ReservationService from \"../../services/ReservationService\";\n\nclass ListFlightComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      flights: [],\n      origin: \"\",\n      destination: \"\",\n      departureDate: \"\",\n      tripType: \"Roundtrip\",\n      itinerary: [],\n      reservations: [],\n    };\n    this.handleSelectButton = this.handleSelectButton.bind(this);\n    this.flightLog = this.flightLog.bind(this);\n  }\n  //needed to mount info multiple times so i created function flightLog so component did mount calss that originally to check if data mounts\n\n  componentDidMount() {\n    this.flightLog();\n  }\n  //used to updated state after slections re made\n  flightLog() {\n    //sets type of trip and departure date\n    this.setState({\n      tripType: localStorage.getItem(\"selection\") || \"Roundtrip\",\n      departureDate: localStorage.getItem(\"departureDate\"),\n    });\n    //gets airport with origin code\n    AirportService.getAirportsByCode(localStorage.getItem(\"origin\")).then(\n      (res) => {\n        this.setState({\n          origin: res.data,\n        });\n      }\n    );\n    //gets airprot with destination code\n    AirportService.getAirportsByCode(localStorage.getItem(\"destination\")).then(\n      (res) => {\n        this.setState({\n          destination: res.data,\n        });\n      }\n    );\n    //gets fllights that are leaving from the orging airport, filters them to make sure they ahve correct destination, then checks the departure dates of the flights\n    FlightService.getFlightsByAirportCode(localStorage.getItem(\"origin\")).then(\n      (res) => {\n        let flights = res.data.filter(\n          (data) =>\n            data.destinationAirport[0].airportCode ===\n            localStorage.getItem(\"destination\")\n        );\n        let dDate = new Date(\n          localStorage.getItem(\"departureDate\").slice(0, 28)\n        );\n        let pDate = new Date(dDate);\n        pDate.setDate(pDate.getDate() - 1);\n        let lDate = new Date(dDate);\n        pDate.setDate(lDate.getDate() + 1);\n        let flightsFiltered = flights.filter((flight) => {\n          if (\n            flight.departureDate.includes(dDate.toISOString().slice(0, 10)) ||\n            flight.departureDate.includes(lDate.toISOString().slice(0, 10)) ||\n            flight.departureDate.includes(pDate.toISOString().slice(0, 10))\n          ) {\n            return true;\n          } else {\n            return false;\n          }\n        });\n        this.setState({\n          flights: flightsFiltered,\n        });\n        //then gets the resercations that exist for the flights\n        flightsFiltered.forEach((flight) =>\n          ReservationService.getReservationForFlight(flight.id).then((res) => {\n            this.setState({\n              reservations: [...this.state.reservations, res],\n            });\n          })\n        );\n      }\n    );\n  }\n  //deletes flight by id (only available for employees))\n  deleteFlight(id) {\n    FlightService.deleteFlight(id).then((res) => {\n      this.setState({\n        flights: this.state.flights.filter((flight) => flight.id !== id),\n      });\n    });\n  }\n  handleSelectButton(e) {\n    let itin = this.state.itinerary;\n    //Adds selected flight to passengers itinerary\n    itin.push(\n      this.state.flights.filter((flight) => {\n        return flight.id === parseInt(e.target.value);\n      })[0]\n    );\n    this.setState({\n      itinerary: itin,\n    });\n    console.log(this.state);\n    if (\n      this.state.tripType === \"Roundtrip\" &&\n      this.state.itinerary.length <= 1\n    ) {\n      //switch origin and destintion and change departure date\n\n      localStorage.setItem(\"departureDate\", localStorage.getItem(\"returnDate\"));\n      localStorage.removeItem(\"returnDate\");\n      console.log(localStorage);\n      let temp = localStorage.getItem(\"origin\");\n      localStorage.setItem(\"origin\", localStorage.getItem(\"destination\"));\n      console.log(localStorage);\n      localStorage.setItem(\"destination\", temp);\n    }\n    if (\n      this.state.tripType === \"Multicity\" &&\n      this.state.itinerary.length <= 1\n    ) {\n      //switch origin and destintion and change departure date\n      localStorage.setItem(\"originalOrigin\", localStorage.getItem(\"origin\"));\n      localStorage.setItem(\n        \"originalDestination\",\n        localStorage.getItem(\"destination\")\n      );\n      localStorage.setItem(\"departureDate\", localStorage.getItem(\"returnDate\"));\n      localStorage.removeItem(\"returnDate\");\n      localStorage.setItem(\"origin\", localStorage.getItem(\"originTwo\"));\n      console.log(localStorage);\n      localStorage.setItem(\n        \"destination\",\n        localStorage.getItem(\"destinationTwo\")\n      );\n    }\n    //calss clight log to update state\n    this.flightLog();\n  }\n  render() {\n    let flights = this.state.flights;\n    //if there\n    if (localStorage.length === 0) {\n      this.props.history.push(\"/search\");\n    }\n    return (\n      <div>\n        {\n          /**checks to see at what point all the flights neccessary are added to itinerary component so that it can change to displaying that. */\n          this.state.itinerary.length === 0 ||\n          (this.state.tripType !== \"Oneway\" &&\n            this.state.itinerary.length < 2) ? (\n            <div className=\"container\">\n              <h2 className=\"text-center mt-3\">Flight List</h2>\n              <div className=\"row flight-list\">\n                <div className=\"text-center\">\n                  From {this.state.origin.airportLocation} to{\" \"}\n                  {this.state.destination.airportLocation}\n                </div>\n                <table className=\"table  table-striped flight-list mb-5\">\n                  <thead>\n                    <tr>\n                      <th>Airline</th>\n                      <th>Departure Time</th>\n                      <th>Arrival Time</th>\n                      <th>Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"flight-list\">\n                    {flights.map((flight) => (\n                      <tr key={flight.id}>\n                        <td>{flight.airline}</td>\n                        <td>\n                          <small>\n                            {new Date(flight.departureDate).toLocaleString()}\n                          </small>\n                        </td>\n                        <td>\n                          <small>\n                            {new Date(flight.arrivalDate).toLocaleString()}\n                          </small>\n                        </td>\n                        <td>\n                          <button\n                            className=\"btn btn-light col m-3\"\n                            value={flight.id}\n                            onClick={this.handleSelectButton}\n                          >\n                            Select\n                          </button>\n                          <Link\n                            className=\"btn btn-light col m-3\"\n                            to={`/view-flight/${flight.id}`}\n                          >\n                            View\n                          </Link>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          ) : (\n            <div className=\"container\">\n              <div className=\"card m-5 bg-subtle shadow-lg\">\n                {\" \"}\n                {this.state.tripType === \"Multicity\" ? (\n                  <div>\n                    {console.log(localStorage)}\n                    <h4 className=\"text-center\">\n                      {localStorage.getItem(\"originalOrigin\")} to{\" \"}\n                      {localStorage.getItem(\"originalDestination\")}\n                    </h4>\n                    <div className=\"test-center\">Then</div>\n                  </div>\n                ) : null}\n                <h4 className=\"text-center\">\n                  {localStorage.getItem(\"origin\")} to{\" \"}\n                  {localStorage.getItem(\"destination\")}\n                </h4>\n                <div className=\"text-center\">{this.state.tripType}</div>\n                <ItineraryComponent\n                  itinerary={this.state.itinerary}\n                  reservations={this.state.reservations}\n                />\n              </div>\n            </div>\n          )\n        }{\" \"}\n      </div>\n    );\n  }\n}\n\nexport default ListFlightComponent;\n"]},"metadata":{},"sourceType":"module"}