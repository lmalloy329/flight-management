{"ast":null,"code":"import _defineProperty from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import AirportService from\"../../services/AirportService\";import SelectorComponent from\"../helpers/SelectorComponent\";import{Link}from\"react-router-dom\";import FlightService from\"../../services/FlightService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FlightsByAirport=/*#__PURE__*/function(_Component){_inherits(FlightsByAirport,_Component);var _super=_createSuper(FlightsByAirport);function FlightsByAirport(props){var _this;_classCallCheck(this,FlightsByAirport);_this=_super.call(this,props);_this.state={airports:[],origin:\"\",flights:[],currentPage:1,flightsPerPage:20};_this.handleSelectChange=_this.handleSelectChange.bind(_assertThisInitialized(_this));_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));return _this;}//gets all airports and makes sure local storage is clear\n_createClass(FlightsByAirport,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;AirportService.getAirports().then(function(res){_this2.setState({airports:res.data.sort(_this2.compare)});});}//handles change to drop down menu\n},{key:\"handleSelectChange\",value:function handleSelectChange(selectedValue,location){var _this3=this;this.setState(_defineProperty({},location,selectedValue));console.log(this.state);FlightService.getFlightsByAirportCode(selectedValue).then(function(res){_this3.setState({flights:res.data});});}//allows us to alphabatize Airport list\n},{key:\"compare\",value:function compare(a,b){if(a.airportLocation<b.airportLocation){return-1;}if(a.airportLocation>b.airportLocation){return 1;}return 0;}},{key:\"iterate\",value:function iterate(i){console.log(i);for(;i<i+10;i++){/*#__PURE__*/_jsx(\"div\",{children:\"hi\"});}}},{key:\"handleClick\",value:function handleClick(event){console.log(this.state);this.setState({currentPage:Number(event.target.id)});}},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,airports=_this$state.airports,flights=_this$state.flights,origin=_this$state.origin,currentPage=_this$state.currentPage,flightsPerPage=_this$state.flightsPerPage;var indexOfLastFlight=currentPage*flightsPerPage;var indexOfFirstFlight=indexOfLastFlight-flightsPerPage;var currentFlights=flights.slice(indexOfFirstFlight,indexOfLastFlight);var pageNumbers=[];for(var i=1;i<=Math.ceil(flights.length/flightsPerPage);i++){pageNumbers.push(i);}var renderPageNumbers=pageNumbers.map(function(number){return/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-personal\",id:number,onClick:_this4.handleClick,children:number},number);});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card m-5 p-3 bg-subtle shadow-lg\",children:[/*#__PURE__*/_jsx(SelectorComponent,{arrayOfData:airports,location:\"origin\",size:\"col-6 offset-md-3\",onSelectChange:this.handleSelectChange}),\" \",this.state.flights.length>0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:origin}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-personal col-3 offset-md-1\",onClick:function onClick(i){i-=10;},children:\"previous\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-personal col-3 offset-md-3\",onClick:function onClick(i){i-=10;},children:\"next\"})]})]}):null]}),/*#__PURE__*/_jsx(\"div\",{id:\"page-numbers\",children:renderPageNumbers}),/*#__PURE__*/_jsxs(\"table\",{className:\"table  table-striped flight-list mb-5\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Airline\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Departure Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Arrival Time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Destination\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"flight-list\",children:currentFlights.map(function(flight){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:flight.airline}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{children:new Date(flight.departureDate).toLocaleString()})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"small\",{children:new Date(flight.arrivalDate).toLocaleString()})}),/*#__PURE__*/_jsx(\"td\",{children:flight.destinationAirport[0].airportName}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-light col m-3\",to:\"/view-flight/\".concat(flight.id),children:\"View\"})})]},flight.id);})})]})]});}}]);return FlightsByAirport;}(Component);export default FlightsByAirport;","map":{"version":3,"sources":["/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/src/components/flight/FlightsByAirport.js"],"names":["React","Component","AirportService","SelectorComponent","Link","FlightService","FlightsByAirport","props","state","airports","origin","flights","currentPage","flightsPerPage","handleSelectChange","bind","handleClick","getAirports","then","res","setState","data","sort","compare","selectedValue","location","console","log","getFlightsByAirportCode","a","b","airportLocation","i","event","Number","target","id","indexOfLastFlight","indexOfFirstFlight","currentFlights","slice","pageNumbers","Math","ceil","length","push","renderPageNumbers","map","number","flight","airline","Date","departureDate","toLocaleString","arrivalDate","destinationAirport","airportName"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport AirportService from \"../../services/AirportService\";\nimport SelectorComponent from \"../helpers/SelectorComponent\";\nimport { Link } from \"react-router-dom\";\nimport FlightService from \"../../services/FlightService\";\n\nclass FlightsByAirport extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      airports: [],\n      origin: \"\",\n      flights: [],\n      currentPage: 1,\n      flightsPerPage: 20,\n    };\n    this.handleSelectChange = this.handleSelectChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  //gets all airports and makes sure local storage is clear\n  componentDidMount() {\n    AirportService.getAirports().then((res) => {\n      this.setState({\n        airports: res.data.sort(this.compare),\n      });\n    });\n  }\n  //handles change to drop down menu\n  handleSelectChange(selectedValue, location) {\n    this.setState({\n      [location]: selectedValue,\n    });\n    console.log(this.state);\n    FlightService.getFlightsByAirportCode(selectedValue).then((res) => {\n      this.setState({\n        flights: res.data,\n      });\n    });\n  }\n  //allows us to alphabatize Airport list\n  compare(a, b) {\n    if (a.airportLocation < b.airportLocation) {\n      return -1;\n    }\n    if (a.airportLocation > b.airportLocation) {\n      return 1;\n    }\n    return 0;\n  }\n  iterate(i) {\n    console.log(i);\n    for (; i < i + 10; i++) {\n      <div>hi</div>;\n    }\n  }\n  handleClick(event) {\n    console.log(this.state);\n    this.setState({\n      currentPage: Number(event.target.id),\n    });\n  }\n\n  render() {\n    let { airports, flights, origin, currentPage, flightsPerPage } = this.state;\n    const indexOfLastFlight = currentPage * flightsPerPage;\n    const indexOfFirstFlight = indexOfLastFlight - flightsPerPage;\n    const currentFlights = flights.slice(indexOfFirstFlight, indexOfLastFlight);\n    const pageNumbers = [];\n    for (let i = 1; i <= Math.ceil(flights.length / flightsPerPage); i++) {\n      pageNumbers.push(i);\n    }\n    const renderPageNumbers = pageNumbers.map((number) => {\n      return (\n        <button\n          className=\"btn btn-personal\"\n          key={number}\n          id={number}\n          onClick={this.handleClick}\n        >\n          {number}\n        </button>\n      );\n    });\n    return (\n      <div className=\"container\">\n        <div className=\"card m-5 p-3 bg-subtle shadow-lg\">\n          <SelectorComponent\n            arrayOfData={airports}\n            location={\"origin\"}\n            size={\"col-6 offset-md-3\"}\n            onSelectChange={this.handleSelectChange}\n          />{\" \"}\n          {this.state.flights.length > 0 ? (\n            <div>\n              <h3 className=\"text-center\">{origin}</h3>\n              <div className=\"row\">\n                <button\n                  className=\"btn btn-personal col-3 offset-md-1\"\n                  onClick={(i) => {\n                    i -= 10;\n                  }}\n                >\n                  previous\n                </button>\n                <button\n                  className=\"btn btn-personal col-3 offset-md-3\"\n                  onClick={(i) => {\n                    i -= 10;\n                  }}\n                >\n                  next\n                </button>\n              </div>\n            </div>\n          ) : null}\n        </div>\n        <div id=\"page-numbers\">{renderPageNumbers}</div>\n        <table className=\"table  table-striped flight-list mb-5\">\n          <thead>\n            <tr>\n              <th>Airline</th>\n              <th>Departure Time</th>\n              <th>Arrival Time</th>\n              <th>Destination</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody className=\"flight-list\">\n            {currentFlights.map((flight) => (\n              <tr key={flight.id}>\n                <td>{flight.airline}</td>\n                <td>\n                  <small>\n                    {new Date(flight.departureDate).toLocaleString()}\n                  </small>\n                </td>\n                <td>\n                  <small>{new Date(flight.arrivalDate).toLocaleString()}</small>\n                </td>\n                <td>{flight.destinationAirport[0].airportName}</td>\n                <td>\n                  <Link\n                    className=\"btn btn-light col m-3\"\n                    to={`/view-flight/${flight.id}`}\n                  >\n                    View\n                  </Link>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nexport default FlightsByAirport;\n"]},"metadata":{},"sourceType":"module"}