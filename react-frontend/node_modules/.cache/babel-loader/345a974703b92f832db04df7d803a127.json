{"ast":null,"code":"import _classCallCheck from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import CustomerService from\"../../services/CustomerService\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListCustomerComponent=/*#__PURE__*/function(_Component){_inherits(ListCustomerComponent,_Component);var _super=_createSuper(ListCustomerComponent);function ListCustomerComponent(props){var _this;_classCallCheck(this,ListCustomerComponent);_this=_super.call(this,props);_this.state={customers:[]};_this.deleteCustomer=_this.deleteCustomer.bind(_assertThisInitialized(_this));return _this;}_createClass(ListCustomerComponent,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//mounts all customers\nCustomerService.getCustomers().then(function(res){_this2.setState({customers:res.data});});}//allows employees to delete customers\n},{key:\"deleteCustomer\",value:function deleteCustomer(id){var _this3=this;CustomerService.deleteCustomer(id).then(function(res){_this3.setState({customers:_this3.state.customers.filter(function(customer){return customer.id!==id;})});});}},{key:\"render\",value:function render(){var _this4=this;var user;if(sessionStorage.getItem(\"user\")){user=JSON.parse(sessionStorage.getItem(\"user\"));}//if user is employee they can access this page could be ternary\nif(user&&user.roles[0].name===\"ROLE_EMPLOYEE\"){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Customers List\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-primary\",to:\"/add-customer\",children:\"Add Customers\"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Customer First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Customer Last Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Customer Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.customers.map(function(customer){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:customer.firstName}),/*#__PURE__*/_jsx(\"td\",{children:customer.lastName}),/*#__PURE__*/_jsx(\"td\",{children:customer.email}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-info\",props:{id:customer.id},to:\"/update-customer/\".concat(customer.id),children:\"Update\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",style:{marginLeft:\"10px\"},onClick:function onClick(){_this4.deleteCustomer(customer.id);},children:\"Delete\"}),/*#__PURE__*/_jsx(Link,{className:\"btn btn-info\",props:{id:customer.id},to:\"/view-customer/\".concat(customer.id),children:\"View\"})]})]},customer.id);})})]})})]});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"container d-flex align-items-center justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Access Denied.\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"Please Login to Access this page\"})]})});}}}]);return ListCustomerComponent;}(Component);export default ListCustomerComponent;","map":{"version":3,"sources":["/Users/lmalloy329/Desktop/Flight Management Project/react-frontend/src/components/customer/ListCustomerComponent.js"],"names":["React","Component","CustomerService","Link","ListCustomerComponent","props","state","customers","deleteCustomer","bind","getCustomers","then","res","setState","data","id","filter","customer","user","sessionStorage","getItem","JSON","parse","roles","name","map","firstName","lastName","email","marginLeft"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport CustomerService from \"../../services/CustomerService\";\nimport { Link } from \"react-router-dom\";\n\nclass ListCustomerComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      customers: [],\n    };\n    this.deleteCustomer = this.deleteCustomer.bind(this);\n  }\n  componentDidMount() {\n    //mounts all customers\n    CustomerService.getCustomers().then((res) => {\n      this.setState({\n        customers: res.data,\n      });\n    });\n  }\n  //allows employees to delete customers\n  deleteCustomer(id) {\n    CustomerService.deleteCustomer(id).then((res) => {\n      this.setState({\n        customers: this.state.customers.filter(\n          (customer) => customer.id !== id\n        ),\n      });\n    });\n  }\n\n  render() {\n    let user;\n    if (sessionStorage.getItem(\"user\")) {\n      user = JSON.parse(sessionStorage.getItem(\"user\"));\n    }\n    //if user is employee they can access this page could be ternary\n    if (user && user.roles[0].name === \"ROLE_EMPLOYEE\") {\n      return (\n        <div>\n          <h2 className=\"text-center\">Customers List</h2>\n          <div className=\"row\">\n            <Link className=\"btn btn-primary\" to=\"/add-customer\">\n              Add Customers\n            </Link>{\" \"}\n          </div>\n          <div className=\"row\">\n            <table className=\"table table-striped table-bordered\">\n              <thead>\n                <tr>\n                  <th>Customer First Name</th>\n                  <th>Customer Last Name</th>\n                  <th>Customer Email</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n\n              <tbody>\n                {this.state.customers.map((customer) => (\n                  <tr key={customer.id}>\n                    <td>{customer.firstName}</td>\n                    <td>{customer.lastName}</td>\n                    <td>{customer.email}</td>\n                    <td>\n                      <Link\n                        className=\"btn btn-info\"\n                        props={{ id: customer.id }}\n                        to={`/update-customer/${customer.id}`}\n                      >\n                        Update\n                      </Link>\n                      <button\n                        className=\"btn btn-danger\"\n                        style={{ marginLeft: \"10px\" }}\n                        onClick={() => {\n                          this.deleteCustomer(customer.id);\n                        }}\n                      >\n                        Delete\n                      </button>\n                      <Link\n                        className=\"btn btn-info\"\n                        props={{ id: customer.id }}\n                        to={`/view-customer/${customer.id}`}\n                      >\n                        View\n                      </Link>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"container d-flex align-items-center justify-content-center\">\n          <div>\n            <h1 className=\"text-center\">Access Denied.</h1>\n            <h3 className=\"text-center\">Please Login to Access this page</h3>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default ListCustomerComponent;\n"]},"metadata":{},"sourceType":"module"}